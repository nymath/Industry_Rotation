# README

## 1. 模型构建

### 流程

我们的目的是构建pe_yoy的预测模型。考虑到季节性因素以及宏观变量的影响，我们考虑使用sarimax进行建模。

1. 将数据集划分为train, test
2. 在train上边使用grid_search 确定模型的参数
3. 根据训练的参数进行滚动预测

### 为什么不使用VAR

- 宏观变量太多(75), 训练集的样本太少。
- 从系数估计的表达式来看，unrestricted VAR等价于单独做OLS(事实上一般VAR都是用结构化模型，这样只能解释经济含义而不能用于预测)

### 为什么时间花费高于VAR

VAR模型参数估计具有显式解，而SAIMAX的参数估计由于MA的存在，需要进行迭代优化.

### 为什么要对GDP进行预测

SARIMAX 考虑了$Y_t$之后项以及`同期`宏观变量的影响，如果直接用于预测的话，会用到未来信息，所以在滚动预测时，需要先对"同期"宏观变量进行预测

### 关于宏观变量的选择问题

Granger因果？还是同期的相关系数？
granger因果可以看作跨期的相关系数检验，本质上和一般相关系数检验(或者说F检验无差异)，而且在模型中我们只考虑变量的同期相关性。综上，我们利用
单变量相关系数检验，选择系数显著的变量纳入回归。

### 关于shrinkage

利用AIC选择模型时，便对参数的数量进行了惩罚，所以我认为没有必要再弄更复杂的模型进行模型压缩。  
同时，在之前的ns, fbayes模型中，很多变量没有相关的数据，在利用预测值进行选股时，无法统一指标。

## 2. 代码介绍

### 文件保存

关于文件保存，我选择使用了hdf文件，这样不会出来几百个.csv文件。

### 代码命名

变量_模型_用途.py

## 回测参数设置

| 参数 | 含义 |
| --- | --- |
|start = '2016-01-01' |
|end = '2021-10-01' | 建议不要超过这个时间，因为我的国债数据只有到去年12月的
|benchmark = '000300.SH' |
|freq = 'd' | 这两个参数目前没用，后边我会逐渐更新
|refresh_rate = 'Monthly(-1)' | 代表每个月末调仓，可选参数目前有Weekly(-1)等

## factor_base
